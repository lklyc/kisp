<%= render 'shared/header', header: 'Search Results', subtitle: "'" + @query + "'" %>

<div class="container">
  <ul class='nav nav-tabs'>
    <li class="<%= 'active' if params[:tab].nil?%>">
      <%= link_to "Articles (#{@articles.size})", results_path %>
    </li>
    <li class="<%= 'active' if params[:tab]=='events'%>">
      <%= link_to "Events (#{@events.size})", results_path(tab: 'events') %>
    </li>
    <li class="<%= 'active' if params[:tab]=='concepts'%>">
      <%= link_to "Concepts (#{@concepts.size})", results_path(tab: 'concepts') %>
    </li>
    <li class="<%= 'active' if params[:tab]=='opinions'%>">
      <%= link_to "Opinions (#{@opinions.size})", results_path(tab: 'opinions') %>
    </li>
  </ul>
</div>

<br/>

<div class="container">
  <% if params[:tab].nil? %>

    <% if @articles.size > 0 %>
      <% @articles.each do |article| %>
        <%= render 'articles/show_article', article: article %>
      <% end %>
    <% else %>
      <p>sorry! nothing came up...</p>
    <% end %>

  <% elsif params[:tab] == 'events' %>

    <% if @events.size > 0 %>
      <% @events.each do |event| %>
        <%= render 'events/show_event', event: event %>
      <% end %>
    <% else %>
      <p>sorry! nothing came up...</p>
    <% end %>

  <% elsif params[:tab] == 'concepts' %>

    <% if @concepts.size > 0 %>
      <% @concepts.each do |concept| %>
        <%= render 'concepts/show_concept', concept: concept %>
      <% end %>
    <% else %>
      <p>sorry! nothing came up...</p>
    <% end %>

  <% elsif params[:tab] == 'opinions' %>

    <% if @opinions.size > 0 %>
      <% @opinions.each do |opinion| %>
        <%= render 'opinions/show_opinion', opinion: opinion %>
      <% end %>
    <% else %>
      <p>sorry! nothing came up...</p>
    <% end %>

  <% end %>
</div>